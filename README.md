
# Задание 1
## 1.1
Диаграмма 1-1_asis.puml находится в директории *diagrams*.

## 1.2
Все диаграммы в директории *diagrams*

1. Для пользователей и адмминистраторов системы умного дома предусмотрены отдельный веб-интерфейсы.
2. В интерфейсе администратора добавляются конфигурация новых устройств
3. В интерфейсе пользователя предусмотрены функции добавления устройств из имеющихся, задание настроек устройств,
просмотр статистики.
4. Исходя из данных про 100 поселков, 200 домов и 5 устройств в каждом, то можем посчитать, что у нас всего 100000
устройств. Исходя из того, что каждое устройство отправляет сообщение на сервер каждые 10 минут, то мы можем посчитать,
что в секунду в среднем получаем 170 запросов. С запасом возьмем, что и пользователи отправляют запросы
каждые 10 минут. Получим примерно 350 запросов в секунду. Нагрузка должна быть примерно равномерной, но возьмем пиковую
нагрузку в 700 запросов в секунду. Такое количество простых запросов может выдержать один сервер на 8 ядер CPU и 16гб RAM.
То есть, теоретически, можно было бы реализовать новую версию монолитного приложения, в которой была бы возможность
добавлять новые устройства самостоятельно, как администраторам (чтобы эти устройства видели пользователи), так и пользователям 
(чтобы они могли управлять установленными у них дома устройствами). Большое количество сервисов (например, для каждого
типа устройств) делать на данный момент не целесообразно.
5. Были выделены следующие сервисы:
   1. API Gateway - авторизует пользователей и маршрутизует запросы.
   2. Smart Home API - сервис, через который строится связь с устройствами умного дома.
   3. Smart Home CORE - сервис, в котором заложена логика взаимодействия пользователей и устройств
   4. Telemetry Management - сервис, который управляет телеметрией.
   5. Device Management - сервис, который управлеяет устройствами. Через этот же сервер администраторы системы
   добавляют новые устройства.
   6. Monitoring - сервис логирования событий.

**Скорректировал связи "Kafka - Smart Home API" и "Kafka - Device Management". Подправил описание и сделял стрелки двусторонними.**

## 1.3
**ER-диаграмма находится в директории diagrams**

Events - это причина, EventHistory - следствие. Например, сработал датчик движения. Это запись в таблице Events. В 
EventsHistory будет, например, три записи - включен свет, включена запись камеры видеонаблюдения, отправлено сообщение 
владельцу. 
## 1.4
Описание api для сервисов управления устройствами и сервиса телеметрии находится в директории *apis*

**Подправил API.**

# Задание 2
1. Запуск контейнера с миникубом **minikube start --driver=docker**
2. В директории k8s ввести **kubectl apply -f .**
Скриншот в папке k8s
